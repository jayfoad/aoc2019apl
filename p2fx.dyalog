⎕IO←0                                                                                                                        
p←⍎⊃⊃⎕NGET'p2.txt'1
f12←{b c d←⍕¨1↓⍵ ⋄ 'a[',d,']←a[',b,']',(⊃'×+'⌽⍨⊃⍵),'a[',c,']'}
f←{⍺←⊂'a←run a' ⋄ ⍬≡⍵:⍺ ⋄ n←⊃⍵ ⋄ n∊1 2:(⍺,⊂f12 4↑⍵)∇4↓⍵ ⋄ (⍺,⊂':return')∇1↓⍵}
⎕FX f p
⊃run 12 2@1 2⊢p
